{% extends 'base.html' %}

{% block content %}
    <div class="container pt-5 mt-5">
        <div class="row justify-content-center">
            <div class="col-11">
                <h2 class="text-center">Select a radiological image to upload</h2>
                <p>
                    You can upload any radiological image, for example: Computed tomography (CT, CAT), Magnetic resonance,
                    Mammmography, X-raysm PET scans, ultrasound. The algorithm behind has been trained with the following
                    types of radiological images: INSERT LIST HERE
                </p>
            </div>
        </div>

        <div class="row justify-content-around">
            <div class="col-lg-4 col-md-10 col-11 text-align-top form">
                <p>
                    {% with messages = get_flashed_messages() %}
                    {% if messages %}
                        <ul>
                            {% for message in messages %}
                                <li><b>{{ message }}</b></li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                    {% endwith %}
                </p>
                <form method="post" action="/" enctype="multipart/form-data">
                    <dl>
                        <div class='mb-3'>
                            <label for="formFile" class="form-label">Upload image</label>
                            <input type="file" accept="image/*" name="file" class="form-control" autocomplete="off" required>
                        </div>
                    </dl>
                    <p>
                        <input type="submit" value="Submit" class="btn btn-info">
                    </p>
                </form>
            </div>

            {% if filename %}
                <div class='col-lg-4 col-md-5 col-11 my-auto'>
                    <img src="{{ url_for('display_image', filename=filename) }}"  class="img-fluid" alt= "Uploaded radiological image" width="450" height="450">
                    <span class="align-middle">
                </div>
            {% endif %}

                <div class="col-lg-4 col-md-5 col-11 pt-3 pb-3 justify-content-top">
                {% if results %}
                    <ul class="list-group">
                        <li class="list-group-item list-group-item-info text-dark">
                            Results:
                            <a href="{{ url_for('home') }}">
                            <button type="button" value="clear" class="btn-close btn-close float-end" aria-label="Close"></button></a>
                        </li>
                        {% for item in results %}
                            <li class="list-group-item">{{ item }}</li>
                        {% endfor %}
                        </ul>
                {% endif %}
        </div>
        </div>

        <!-- {% if filename %}
            <script src="{{ url_for('recommend_cuis', filename=filename) }}"></script>
        {% endif %} -->
{% endblock %}